var helpers = require("../../../../../../AppData/Roaming/npm/node_modules/parcel/node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");
var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);

try {
var parcelHelpers = require("@parcel/transformer-js/src/esmodule-helpers.js");
parcelHelpers.defineInteropFlag(exports);
parcelHelpers.export(exports, "ProfileView", ()=>ProfileView
);
var _react = require("react");
var _reactDefault = parcelHelpers.interopDefault(_react);
var _axios = require("axios");
var _axiosDefault = parcelHelpers.interopDefault(_axios);
var _form = require("react-bootstrap/Form");
var _formDefault = parcelHelpers.interopDefault(_form);
var _button = require("react-bootstrap/Button");
var _buttonDefault = parcelHelpers.interopDefault(_button);
var _reactHelmet = require("react-helmet");
var _reactHelmetDefault = parcelHelpers.interopDefault(_reactHelmet);
var _row = require("react-bootstrap/Row");
var _rowDefault = parcelHelpers.interopDefault(_row);
var _propTypes = require("prop-types");
var _propTypesDefault = parcelHelpers.interopDefault(_propTypes);
var _reactBootstrap = require("react-bootstrap");
var _image = require("react-bootstrap/esm/Image");
var _formControl = require("react-bootstrap/FormControl");
var _formControlDefault = parcelHelpers.interopDefault(_formControl);
var _reactRouterDom = require("react-router-dom");
var _modalHeader = require("react-bootstrap/ModalHeader");
var _modalHeaderDefault = parcelHelpers.interopDefault(_modalHeader);
var _modalDialog = require("react-bootstrap/ModalDialog");
var _modalDialogDefault = parcelHelpers.interopDefault(_modalDialog);
var _modal = require("react-bootstrap/Modal");
var _modalDefault = parcelHelpers.interopDefault(_modal);
var _container = require("react-bootstrap/Container");
var _containerDefault = parcelHelpers.interopDefault(_container);
var _col = require("react-bootstrap/Col");
var _colDefault = parcelHelpers.interopDefault(_col);
class ProfileView extends _reactDefault.default.Component {
    constructor(){
        super();
        this.state = {
            Username: ''
        };
        this.state = {
            Password: ''
        };
        this.state = {
            Email: ''
        };
        this.state = {
            Birthday: ''
        };
        this.state = {
            FavoriteMovies: []
        };
        this.state = {
            FavMovies: []
        };
    }
    componentDidMount() {
        let accessToken = localStorage.getItem('token');
        let userInfo = localStorage.getItem('user');
        if (accessToken !== null) {
            this.setState({
                user: localStorage.getItem('user'),
                token: localStorage.getItem('token')
            });
            this.getMovies(accessToken);
            this.getUser(accessToken, userInfo);
        }
    }
    getUser(token, user) {
        _axiosDefault.default.get(`https://itshorrortime.herokuapp.com/users/${user}`, {
            headers: {
                Authorization: `Bearer ${token}`
            }
        }).then((response)=>{
            console.log('Got account Info');
            this.setState({
                userInfo: response.data,
                Username: response.data.Username,
                Password: response.data.Password,
                Email: response.data.Email,
                Birthday: response.data.Birthday,
                FavoriteMovies: response.data.FavoriteMovies
            });
        });
    }
    getMovies(token) {
        _axiosDefault.default.get('https://itshorrortime.herokuapp.com/movies', {
            headers: {
                Authorization: `Bearer ${token}`
            }
        }).then((response)=>{
            this.setState({
                movies: response.data
            });
            console.log('got movies');
        });
    }
    handleDelete(user, token) {
        _axiosDefault.default.delete(`https://itshorrortime.herokuapp.com/users/${user}`, {
            headers: {
                Authorization: `Bearer ${token}`
            }
        }).then(()=>{
            localStorage.removeItem('user');
            localStorage.removeItem('token');
            window.open('/', '_self');
        });
    }
    handleUpdate(user, token, e) {
        console.log('you are in handleUpdate');
        console.log(this.state.Username);
        console.log(this.state.Password);
        console.log(e.target.username.value);
        e.preventDefault();
        _axiosDefault.default.put(`https://itshorrortime.herokuapp.com/users/${user} `, {
            Username: e.target.username.value,
            Password: e.target.password.value,
            Email: e.target.email.value,
            Birthday: e.target.birthday.value
        }, {
            headers: {
                'Authorization': `Bearer ${token} `,
                'Content-Type': 'application/json'
            }
        }).then((response)=>{
            console.log(response);
            const data = response.data;
            localStorage.setItem("user", data.Username);
            console.log(data);
            window.open(`/users/${data.Username}`);
        }).catch((e)=>{
            console.log(e.toJSON());
            console.log(e.response.data);
        });
    }
    deleteFav(movie, user, token, userInfo) {
        console.log(movie);
        console.log(token);
        _axiosDefault.default.delete(`https://itshorrortime.herokuapp.com/users/${user}/movies/${movie}`, {
            headers: {
                'Authorization': `Bearer ${token} `,
                'Content-Type': 'application/json'
            }
        }).then((response)=>{
            console.log(response);
            const data = response.data;
            this.setState({
                FavMovies: response.data
            });
            window.location.reload();
        });
    }
    render() {
        const { user , token , movies , userInfo  } = this.props;
        const FavMovies = movies.filter((movie)=>{
            return userInfo.FavoriteMovies.includes(movie._id);
        });
        return(/*#__PURE__*/ _reactDefault.default.createElement(_reactDefault.default.Fragment, null, /*#__PURE__*/ _reactDefault.default.createElement(_reactHelmetDefault.default, {
            bodyAttributes: {
                style: 'background-color : black'
            },
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 161
            },
            __self: this
        }), /*#__PURE__*/ _reactDefault.default.createElement(_containerDefault.default, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 162
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_rowDefault.default, {
            className: "justify-content-md-center align-items-md-center ",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 163
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_colDefault.default, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 164
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card, {
            className: "bg-dark justify-content-md-center align-items-center",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 166
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Title, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 168
            },
            __self: this
        }, " Account Information"), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Body, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 169
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Text, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 170
            },
            __self: this
        }, "Username: ", user), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Text, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 171
            },
            __self: this
        }, "Email:", this.state.Email), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Text, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 172
            },
            __self: this
        }, "Birthday: ", this.state.Birthday)), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Accordion, {
            defaultActiveKey: "0",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 179
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Header, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 181
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Accordion.Toggle, {
            as: _buttonDefault.default,
            variant: "dark",
            eventKey: "0",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 182
            },
            __self: this
        }, "Update Information")), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Accordion.Collapse, {
            eventKey: "0",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 186
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Body, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 187
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default, {
            onSubmit: (e)=>this.handleUpdate(user, token, e)
            ,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 189
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Row, {
            className: "justify-content-center",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 190
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Label, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 191
            },
            __self: this
        }, "Username:"), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Control, {
            type: "text",
            required: true,
            minLength: "6",
            maxLength: "12",
            placeholder: "Enter Username",
            value: this.state.username,
            id: "username",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 192
            },
            __self: this
        })), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Row, {
            className: "justify-content-center",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 203
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Label, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 204
            },
            __self: this
        }, "Password:"), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Control, {
            type: "text",
            required: true,
            minLength: "6",
            maxLength: "12",
            placeholder: "Enter Password",
            id: "password",
            value: this.state.password,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 205
            },
            __self: this
        })), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Row, {
            className: "justify-content-center",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 217
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Label, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 219
            },
            __self: this
        }, "Email:"), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Control, {
            type: "text",
            required: true,
            placeholder: "Enter Email",
            id: "email",
            value: this.state.email,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 220
            },
            __self: this
        })), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Row, {
            className: "justify-content-center",
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 230
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Label, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 231
            },
            __self: this
        }, "Birthday: "), /*#__PURE__*/ _reactDefault.default.createElement(_formDefault.default.Control, {
            type: "date",
            required: true,
            id: "birthday",
            value: this.state.birthday,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 232
            },
            __self: this
        })), /*#__PURE__*/ _reactDefault.default.createElement(_buttonDefault.default, {
            type: "submit",
            variant: "dark",
            block: true,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 243
            },
            __self: this
        }, "Submit"))))))), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 253
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_colDefault.default, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 254
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Title, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 255
            },
            __self: this
        }, "FavoriteMoviesList"), /*#__PURE__*/ _reactDefault.default.createElement(_reactBootstrap.Card.Body, {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 256
            },
            __self: this
        }, /*#__PURE__*/ _reactDefault.default.createElement("div", {
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 258
            },
            __self: this
        }, FavMovies.map((movie, index)=>/*#__PURE__*/ _reactDefault.default.createElement("div", {
                key: index,
                __source: {
                    fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                    lineNumber: 259
                },
                __self: this
            }, movie.Title, " ", /*#__PURE__*/ _reactDefault.default.createElement(_buttonDefault.default, {
                onClick: (e)=>this.deleteFav(movie._id, user, token, userInfo)
                ,
                variant: "dark",
                block: true,
                __source: {
                    fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                    lineNumber: 259
                },
                __self: this
            }, "Delete"), " ")
        ))))))), /*#__PURE__*/ _reactDefault.default.createElement(_buttonDefault.default, {
            onClick: (e)=>this.handleDelete(user, token)
            ,
            variant: "dark",
            block: true,
            __source: {
                fileName: "C:\\Users\\tobia\\Documents\\GitHub\\horrorTime-client\\src\\components\\profile-view\\profile-view.jsx",
                lineNumber: 272
            },
            __self: this
        }, "Delete")));
    }
}
ProfileView.propTypes = {
    movies: _propTypesDefault.default.array.isRequired
};
exports.default = ProfileView;

  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}